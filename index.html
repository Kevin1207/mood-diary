<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心情日记 - 记录每一天的心情</title>
    <link rel="stylesheet" href="style.css">
    <!-- LeanCloud SDK -->
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.15.2/dist/av-min.js"></script>
</head>
<body>
    <!-- 登录遮罩层 -->
    <div id="auth-overlay" class="auth-overlay">
        <div class="auth-container">
            <div class="auth-header">
                <h2>🌈 心情日记</h2>
                <p class="auth-subtitle">登录后云端同步，数据永不丢失</p>
            </div>
            
            <!-- 登录表单 -->
            <div id="login-form" class="auth-form">
                <h3>登录账号</h3>
                <div class="input-group">
                    <label>用户名或邮箱</label>
                    <input type="text" id="login-username" placeholder="请输入用户名或邮箱" autocomplete="username">
                </div>
                <div class="input-group">
                    <label>密码</label>
                    <input type="password" id="login-password" placeholder="请输入密码" autocomplete="current-password">
                </div>
                <button id="login-btn" class="auth-btn">登录</button>
                <p class="auth-switch">
                    还没有账号？<a href="#" id="show-register">立即注册</a>
                </p>
            </div>
            
            <!-- 注册表单 -->
            <div id="register-form" class="auth-form" style="display: none;">
                <h3>注册账号</h3>
                <div class="input-group">
                    <label>用户名</label>
                    <input type="text" id="register-username" placeholder="请输入用户名（3-20个字符）" autocomplete="username">
                </div>
                <div class="input-group">
                    <label>邮箱</label>
                    <input type="email" id="register-email" placeholder="请输入邮箱" autocomplete="email">
                </div>
                <div class="input-group">
                    <label>密码</label>
                    <input type="password" id="register-password" placeholder="请输入密码（至少6位）" autocomplete="new-password">
                </div>
                <div class="input-group">
                    <label>确认密码</label>
                    <input type="password" id="register-confirm-password" placeholder="请再次输入密码" autocomplete="new-password">
                </div>
                <button id="register-btn" class="auth-btn">注册</button>
                <p class="auth-switch">
                    已有账号？<a href="#" id="show-login">立即登录</a>
                </p>
            </div>
        </div>
    </div>

    <!-- 背景设置按钮 -->
    <button id="bg-settings-btn" class="bg-settings-btn" title="背景设置">🎨</button>
    
    <!-- 用户信息和登出按钮 -->
    <div id="user-info" class="user-info" style="display: none;">
        <span id="username-display"></span>
        <button id="logout-btn" class="logout-btn">登出</button>
    </div>

    <div class="container">
        <header>
            <h1>🌈 心情日记</h1>
            <p class="subtitle">记录每一天的心情，回顾美好时光</p>
        </header>

        <main>
            <!-- 心情记录区 -->
            <section class="mood-input-section">
                <h2>今天的心情</h2>
                <div class="input-group">
                    <label for="date-picker">选择日期：</label>
                    <input type="date" id="date-picker" max="">
                </div>
                
                <div class="mood-selector">
                    <h3>你今天的心情是？</h3>
                    <div class="mood-options">
                        <button class="mood-btn" data-mood="excited" title="非常开心">
                            <span class="emoji">😄</span>
                            <span class="label">非常开心</span>
                        </button>
                        <button class="mood-btn" data-mood="happy" title="开心">
                            <span class="emoji">😊</span>
                            <span class="label">开心</span>
                        </button>
                        <button class="mood-btn" data-mood="calm" title="平静">
                            <span class="emoji">😌</span>
                            <span class="label">平静</span>
                        </button>
                        <button class="mood-btn" data-mood="tired" title="疲惫">
                            <span class="emoji">😫</span>
                            <span class="label">疲惫</span>
                        </button>
                        <button class="mood-btn" data-mood="sad" title="难过">
                            <span class="emoji">😢</span>
                            <span class="label">难过</span>
                        </button>
                        <button class="mood-btn" data-mood="angry" title="生气">
                            <span class="emoji">😠</span>
                            <span class="label">生气</span>
                        </button>
                    </div>
                </div>

                <div class="note-group">
                    <label for="mood-note">心情记录（可选）：</label>
                    <textarea id="mood-note" placeholder="今天发生了什么？写下你的想法..." rows="4"></textarea>
                </div>

                <button id="save-btn" class="save-btn">💾 保存心情</button>
            </section>

            <!-- 月历视图区 -->
            <section class="calendar-section">
                <div class="calendar-header">
                    <button id="prev-month" class="nav-btn">◀</button>
                    <h2 id="current-month"></h2>
                    <button id="next-month" class="nav-btn">▶</button>
                </div>
                <div id="calendar" class="calendar"></div>
            </section>

            <!-- 心情详情弹窗 -->
            <div id="mood-modal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h3 id="modal-date"></h3>
                    <div id="modal-mood" class="modal-mood"></div>
                    <p id="modal-note" class="modal-note"></p>
                    <button id="delete-btn" class="delete-btn">🗑️ 删除记录</button>
                </div>
            </div>

            <!-- 背景设置弹窗 -->
            <div id="bg-modal" class="modal">
                <div class="modal-content bg-modal-content">
                    <span class="close bg-close">&times;</span>
                    <h3>🎨 背景设置</h3>
                    
                    <div class="bg-section">
                        <h4>预设渐变背景</h4>
                        <div class="bg-options">
                            <div class="bg-option" data-type="gradient" data-value="linear-gradient(135deg, #667eea 0%, #764ba2 100%)" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)">
                                <span class="bg-label">紫色梦幻</span>
                            </div>
                            <div class="bg-option" data-type="gradient" data-value="linear-gradient(135deg, #f093fb 0%, #f5576c 100%)" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%)">
                                <span class="bg-label">粉红浪漫</span>
                            </div>
                            <div class="bg-option" data-type="gradient" data-value="linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)">
                                <span class="bg-label">蓝色海洋</span>
                            </div>
                            <div class="bg-option" data-type="gradient" data-value="linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)">
                                <span class="bg-label">翠绿清新</span>
                            </div>
                            <div class="bg-option" data-type="gradient" data-value="linear-gradient(135deg, #fa709a 0%, #fee140 100%)" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%)">
                                <span class="bg-label">日落余晖</span>
                            </div>
                            <div class="bg-option" data-type="gradient" data-value="linear-gradient(135deg, #30cfd0 0%, #330867 100%)" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%)">
                                <span class="bg-label">深海神秘</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-section">
                        <h4>纯色背景</h4>
                        <div class="bg-options">
                            <div class="bg-option" data-type="color" data-value="#f8f9fa" style="background: #f8f9fa">
                                <span class="bg-label">浅灰</span>
                            </div>
                            <div class="bg-option" data-type="color" data-value="#ffe5e5" style="background: #ffe5e5">
                                <span class="bg-label">粉红</span>
                            </div>
                            <div class="bg-option" data-type="color" data-value="#e3f2fd" style="background: #e3f2fd">
                                <span class="bg-label">淡蓝</span>
                            </div>
                            <div class="bg-option" data-type="color" data-value="#e8f5e9" style="background: #e8f5e9">
                                <span class="bg-label">浅绿</span>
                            </div>
                            <div class="bg-option" data-type="color" data-value="#fff9e6" style="background: #fff9e6">
                                <span class="bg-label">米黄</span>
                            </div>
                            <div class="bg-option" data-type="color" data-value="#f3e5f5" style="background: #f3e5f5">
                                <span class="bg-label">淡紫</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-section">
                        <h4>上传图片</h4>
                        <div class="upload-section">
                            <input type="file" id="bg-upload" accept="image/*" style="display: none;">
                            <button id="upload-btn" class="upload-btn">📁 选择图片</button>
                            <p class="upload-hint">支持 JPG、PNG 格式，建议尺寸 1920x1080</p>
                            <div id="preview-container" class="preview-container" style="display: none;">
                                <img id="bg-preview" class="bg-preview" alt="预览">
                                <button id="remove-bg-btn" class="remove-bg-btn">🗑️ 移除图片</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>用心记录，用爱生活 ❤️</p>
        </footer>
    </div>

    <script type="module" src="config.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>
